# S03 – eda_cli: мини-EDA для CSV

CLI-утилита для базового и расширенного анализа CSV-файлов.
Используется в рамках Семинара 03 курса «Инженерия ИИ».

Она автоматически строит:

* summary по колонкам;
* анализ пропусков;
* визуализацию пропусков;
* корреляции;
* гистограммы и гистограммы с выбросами;
* top-k категорий;
* эвристику качества данных;
* итоговый `quality_score`.

---

## Требования

* Python 3.11+
* Установленный менеджер пакетов [uv](https://docs.astral.sh/uv/)

---

## Установка и инициализация

В корне проекта (`S03`) выполните:

```bash
uv sync
```

Эта команда:

* создаст виртуальное окружение `.venv`;
* установит зависимости из `pyproject.toml`;
* установит CLI-команду `eda-cli` в ваше окружение.

---

## Запуск CLI

### 1. Быстрый обзор датасета

```bash
uv run eda-cli overview data/example.csv
```

Параметры:

* `--sep` — разделитель (по умолчанию `,`);
* `--encoding` — кодировка (по умолчанию `utf-8`).

---

### 2. Полный EDA-отчёт

```bash
uv run eda-cli report data/example.csv --out-dir reports
```

### Основные параметры

| Параметр              | Значение по умолчанию | Описание                        |
| --------------------- | --------------------- | ------------------------------- |
| `--out-dir`           | `reports`             | куда сохранять отчёт            |
| `--sep`               | `,`                   | разделитель CSV                 |
| `--encoding`          | `utf-8`               | кодировка                       |
| `--max-hist-columns`  | `6`                   | максимум колонок для гистограмм |
| `--top-k-categories`  | `5`                   | top-k категорий                 |
| `--min-missing-share` | `0.05`                | порог «много пропусков»         |
| `--title`             | `EDA-отчёт`           | заголовок отчёта                |

---

## Что создаёт команда `report`

### Таблицы

* `summary.csv` — статистики по колонкам;
* `missing.csv` — пропуски по колонкам;
* `correlation.csv` — корреляции числовых колонок;
* `top_categories/*.csv` — top-k категорий.

### Графики

* `hist_*.png` — стандартные гистограммы;
* `histograms_outliers/*.png` — гистограммы с выделением выбросов;
* `missing_matrix.png` — визуализация пропусков;
* `correlation_heatmap.png` — тепловая карта корреляций.

### Полный Markdown-отчёт

* `report.md` — итоговый EDA-отчёт.

---

## Структура Markdown-отчёта

### Колонки

См. файл `summary.csv`.

### Пропуски

См. файлы:

* `missing.csv`
* `missing_matrix.png`

Колонки с пропусками выше порога `min_missing_share` отмечаются отдельно.

### Корреляции

См. файлы:

* `correlation.csv`
* `correlation_heatmap.png`

### Категориальные признаки

См. файлы:

* `top_categories/*.csv`
* `barplots_top_categories/*.png`

Количество выводимых категорий задаётся параметром `--top-k-categories`.

### Гистограммы числовых признаков

* `hist_*.png` — обычные гистограммы
* `histograms_outliers/*.png` — гистограммы с выделенными выбросами

Количество колонок регулируется параметром `--max-hist-columns`.

---

## Эвристики качества данных

В отчёте вычисляются признаки:

* высокий процент уникальных значений (>80%);
* выбросы по правилу 1.5·IQR (>5%);
* смешанные типы в колонке;
* несбалансированные категориальные признаки (>90% одного значения);
* много повторяющихся строк (>10%);
* слишком мало строк;
* слишком много колонок;
* слишком много пропусков.

### Итоговая метрика

`quality_score` принимает значение от `0.0` до `1.0`.
Чем значение выше — тем лучше качество данных.

---

## Тесты

```bash
uv run pytest -q
```


